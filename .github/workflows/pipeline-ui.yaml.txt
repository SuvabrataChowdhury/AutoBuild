name: Pipeline UI

on:
    pull_request:
        branches: ["main"]
        types: [opened, reopened, synchronize]

jobs:
    detect-ui-changes:
        uses: ./.github/workflows/_detect_directory_changes.yaml
        with:
            directory-path: pipeline-ui

    ui-ci:
        needs: detect-ui-changes
        if: needs.detect-ui-changes.outputs.is_changed == 'true'
        uses: ./.github/workflows/_react_ci.yaml
        with:
            ui-path: pipeline-ui
    
    ui-ci-skip:
        needs: detect-ui-changes
        if: needs.detect-ui-changes.outputs.is_changed == 'false'
        runs-on: ubuntu-latest
        steps:
            - run: echo "No UI changes has been detected -- skipping UI"